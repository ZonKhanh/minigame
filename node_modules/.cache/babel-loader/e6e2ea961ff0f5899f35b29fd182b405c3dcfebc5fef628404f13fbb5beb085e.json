{"ast":null,"code":"import{createSlice}from'@reduxjs/toolkit';import audioManager from'../../utils/audioManager';const gameContentModalInitialState={nameCorrectIndex:null,requiredNumberProducts:0,randomNameCorrect:'',listProducts:[],listCharacters:[],levels:[],timeStepPercentage:[],currentScore:0,currentLevel:1,requiredProductNumber:0,numberCorrect:0,numberCorrectDisplay:'none',initTimeRemainder:100,score:0,timerInterval:null,// Hợp nhất timerInterval và intervalId\nshowGameContent:false,showErrorModal:false,showResultGameModal:false,gameTime:{timeRemainder:100,timerRangeWidth:'100%',timeStep:10},gameSound:{maxVolume:1,audioRatio:1}};const gameContentModalSlice=createSlice({name:'gameContentModal',initialState:gameContentModalInitialState,reducers:{updateProducts(state,action){state.listProducts=action.payload;},updateCharacters(state,action){state.listCharacters=action.payload;},updateLevels(state,action){state.levels=action.payload;},updateTimeStepPercentage(state,action){state.timeStepPercentage=action.payload;},showRandomNameCorrect(state){var _state$listProducts$r,_state$listProducts$;const maxRequiredProducts=5;let randomIndex;if(state.nameCorrectIndex!==undefined){do{randomIndex=Math.floor(Math.random()*state.listProducts.length);}while(randomIndex===state.nameCorrectIndex);}else{randomIndex=Math.floor(Math.random()*state.listProducts.length);}state.nameCorrectIndex=randomIndex;state.requiredNumberProducts=Math.floor(Math.random()*maxRequiredProducts)+1;state.randomNameCorrect=((_state$listProducts$r=state.listProducts[randomIndex])===null||_state$listProducts$r===void 0?void 0:_state$listProducts$r.title)||((_state$listProducts$=state.listProducts[0])===null||_state$listProducts$===void 0?void 0:_state$listProducts$.title)||'';},incrementScore(state){state.currentScore+=1;},updateGameLevel(state){state.currentLevel=Math.floor(state.currentScore/3)+1;const levelData=state.levels.find(level=>level.level===state.currentLevel);if(levelData){state.timeStepDenominator=levelData.timeStepPercentage;state.gameTime.timeStep=state.initTimeRemainder/(100/state.timeStepDenominator);}if(state.currentLevel>state.previousLevel){const newPlaybackRate=state.gameSound.audioRatio+0.1;state.gameSound.audioRatio=newPlaybackRate;audioManager.setBackgroundPlaybackRate(newPlaybackRate);}state.previousLevel=state.currentLevel;},setRandomProductNumber(state,action){state.requiredProductNumber=action.payload;},setGameData(state,action){state.listProducts=action.payload.products;state.listCharacters=action.payload.characters;state.levels=action.payload.levels;},playBackgroundSound(state){audioManager.playBackgroundSound();},playSoundGameOver(state){audioManager.playSoundGameOver();},resetGame(){return gameContentModalInitialState;},toggleGameContent(state,action){state.showGameContent=action.payload;},setTimerInterval(state,action){state.timerInterval=action.payload;},showCountdownTime(state){state.gameTime.timeRemainder-=state.gameTime.timeStep;if(state.gameTime.timeRemainder<=0){clearInterval(state.timerInterval);state.timerInterval=null;state.gameTime.timeRemainder=0;}state.gameTime.timerRangeWidth=Math.min(state.gameTime.timeRemainder/state.gameTime.timeStep*100,100)+'%';},resetCountdownTime(state){state.gameTime.timeRemainder=state.initTimeRemainder;state.gameTime.timerRangeWidth='100%';},clearGameInterval(state){clearInterval(state.timerInterval);state.timerInterval=null;},showResultGame(state){state.showResultGameModal=true;state.finalScore=state.currentScore;},hideResultGame(state){state.showResultGameModal=false;}}});export const resetAnswerAndShowRandom=()=>dispatch=>{dispatch(resetCountdownTime());dispatch(showRandomNameCorrect());};export const trueCorrect=()=>dispatch=>{dispatch(incrementScore());dispatch(updateGameLevel());};export const{updateProducts,updateCharacters,updateLevels,updateTimeStepPercentage,showRandomNameCorrect,incrementScore,updateGameLevel,setRandomProductNumber,setGameData,playBackgroundSound,playSoundGameOver,resetGame,toggleGameContent,setTimerInterval,showCountdownTime,resetCountdownTime,clearGameInterval,showResultGame,hideResultGame}=gameContentModalSlice.actions;export default gameContentModalSlice.reducer;","map":{"version":3,"names":["createSlice","audioManager","gameContentModalInitialState","nameCorrectIndex","requiredNumberProducts","randomNameCorrect","listProducts","listCharacters","levels","timeStepPercentage","currentScore","currentLevel","requiredProductNumber","numberCorrect","numberCorrectDisplay","initTimeRemainder","score","timerInterval","showGameContent","showErrorModal","showResultGameModal","gameTime","timeRemainder","timerRangeWidth","timeStep","gameSound","maxVolume","audioRatio","gameContentModalSlice","name","initialState","reducers","updateProducts","state","action","payload","updateCharacters","updateLevels","updateTimeStepPercentage","showRandomNameCorrect","_state$listProducts$r","_state$listProducts$","maxRequiredProducts","randomIndex","undefined","Math","floor","random","length","title","incrementScore","updateGameLevel","levelData","find","level","timeStepDenominator","previousLevel","newPlaybackRate","setBackgroundPlaybackRate","setRandomProductNumber","setGameData","products","characters","playBackgroundSound","playSoundGameOver","resetGame","toggleGameContent","setTimerInterval","showCountdownTime","clearInterval","min","resetCountdownTime","clearGameInterval","showResultGame","finalScore","hideResultGame","resetAnswerAndShowRandom","dispatch","trueCorrect","actions","reducer"],"sources":["C:/Users/Admin/OneDrive/Máy tính/MiniGame-ReduxToolKit/src/components/GameContentModal/GameContentSlice.js"],"sourcesContent":["import { createSlice } from '@reduxjs/toolkit';\r\nimport audioManager from '../../utils/audioManager';\r\n\r\nconst gameContentModalInitialState = {\r\n    nameCorrectIndex: null,\r\n    requiredNumberProducts: 0,\r\n    randomNameCorrect: '',\r\n    listProducts: [],\r\n    listCharacters: [],\r\n    levels: [],\r\n    timeStepPercentage: [],\r\n    currentScore: 0,\r\n    currentLevel: 1,\r\n    requiredProductNumber: 0,\r\n    numberCorrect: 0,\r\n    numberCorrectDisplay: 'none',\r\n    initTimeRemainder: 100,\r\n    score: 0,\r\n    timerInterval: null, // Hợp nhất timerInterval và intervalId\r\n    showGameContent: false,\r\n    showErrorModal: false,\r\n    showResultGameModal: false,\r\n    gameTime: {\r\n        timeRemainder: 100,\r\n        timerRangeWidth: '100%',\r\n        timeStep: 10,\r\n    },\r\n    gameSound: {\r\n        maxVolume: 1,\r\n        audioRatio: 1,\r\n    },\r\n};\r\n\r\nconst gameContentModalSlice = createSlice({\r\n    name: 'gameContentModal',\r\n    initialState: gameContentModalInitialState,\r\n    reducers: {\r\n        updateProducts(state, action) {\r\n            state.listProducts = action.payload;\r\n        },\r\n        updateCharacters(state, action) {\r\n            state.listCharacters = action.payload;\r\n        },\r\n        updateLevels(state, action) {\r\n            state.levels = action.payload;\r\n        },\r\n        updateTimeStepPercentage(state, action) {\r\n            state.timeStepPercentage = action.payload;\r\n        },\r\n        showRandomNameCorrect(state) {\r\n            const maxRequiredProducts = 5;\r\n            let randomIndex;\r\n            if (state.nameCorrectIndex !== undefined) {\r\n                do {\r\n                    randomIndex = Math.floor(Math.random() * state.listProducts.length);\r\n                } while (randomIndex === state.nameCorrectIndex);\r\n            } else {\r\n                randomIndex = Math.floor(Math.random() * state.listProducts.length);\r\n            }\r\n            state.nameCorrectIndex = randomIndex;\r\n            state.requiredNumberProducts = Math.floor(Math.random() * maxRequiredProducts) + 1;\r\n            state.randomNameCorrect = state.listProducts[randomIndex]?.title || state.listProducts[0]?.title || '';\r\n        },\r\n        incrementScore(state) {\r\n            state.currentScore += 1;\r\n        },\r\n        updateGameLevel(state) {\r\n            state.currentLevel = Math.floor(state.currentScore / 3) + 1;\r\n            const levelData = state.levels.find(level => level.level === state.currentLevel);\r\n            if (levelData) {\r\n                state.timeStepDenominator = levelData.timeStepPercentage;\r\n                state.gameTime.timeStep = state.initTimeRemainder / (100 / state.timeStepDenominator);\r\n            }\r\n            if (state.currentLevel > state.previousLevel) {\r\n                const newPlaybackRate = state.gameSound.audioRatio + 0.1;\r\n                state.gameSound.audioRatio = newPlaybackRate;\r\n                audioManager.setBackgroundPlaybackRate(newPlaybackRate);\r\n            }\r\n            state.previousLevel = state.currentLevel;\r\n        },\r\n        setRandomProductNumber(state, action) {\r\n            state.requiredProductNumber = action.payload;\r\n        },\r\n        setGameData(state, action) {\r\n            state.listProducts = action.payload.products;\r\n            state.listCharacters = action.payload.characters;\r\n            state.levels = action.payload.levels;\r\n        },\r\n        playBackgroundSound(state) {\r\n            audioManager.playBackgroundSound();\r\n        },\r\n        playSoundGameOver(state) {\r\n            audioManager.playSoundGameOver();\r\n        },\r\n        resetGame() {\r\n            return gameContentModalInitialState;\r\n        },\r\n        toggleGameContent(state, action) {\r\n            state.showGameContent = action.payload;\r\n        },\r\n        setTimerInterval(state, action) {\r\n            state.timerInterval = action.payload;\r\n        },\r\n        showCountdownTime(state) {\r\n            state.gameTime.timeRemainder -= state.gameTime.timeStep;\r\n            if (state.gameTime.timeRemainder <= 0) {\r\n                clearInterval(state.timerInterval);\r\n                state.timerInterval = null;\r\n                state.gameTime.timeRemainder = 0;\r\n            }\r\n            state.gameTime.timerRangeWidth = Math.min(state.gameTime.timeRemainder / state.gameTime.timeStep * 100, 100) + '%';\r\n        },\r\n        resetCountdownTime(state) {\r\n            state.gameTime.timeRemainder = state.initTimeRemainder;\r\n            state.gameTime.timerRangeWidth = '100%';\r\n        },\r\n        clearGameInterval(state) {\r\n            clearInterval(state.timerInterval);\r\n            state.timerInterval = null;\r\n        },\r\n        showResultGame(state) {\r\n            state.showResultGameModal = true;\r\n            state.finalScore = state.currentScore;\r\n        },\r\n        hideResultGame(state) {\r\n            state.showResultGameModal = false;\r\n        },\r\n    },\r\n});\r\n\r\nexport const resetAnswerAndShowRandom = () => (dispatch) => {\r\n    dispatch(resetCountdownTime());\r\n    dispatch(showRandomNameCorrect());\r\n  };\r\n\r\nexport const trueCorrect = () => (dispatch) => {\r\n    dispatch(incrementScore());\r\n    dispatch(updateGameLevel());\r\n};\r\n\r\nexport const {\r\n    updateProducts,\r\n    updateCharacters,\r\n    updateLevels,\r\n    updateTimeStepPercentage,\r\n    showRandomNameCorrect,\r\n    incrementScore,\r\n    updateGameLevel,\r\n    setRandomProductNumber,\r\n    setGameData,\r\n    playBackgroundSound,\r\n    playSoundGameOver,\r\n    resetGame,\r\n    toggleGameContent,\r\n    setTimerInterval,\r\n    showCountdownTime,\r\n    resetCountdownTime,\r\n    clearGameInterval,\r\n    showResultGame,\r\n    hideResultGame\r\n} = gameContentModalSlice.actions;\r\n\r\nexport default gameContentModalSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}